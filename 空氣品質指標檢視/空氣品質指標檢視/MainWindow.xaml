<Window x:Class="YourNamespace.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        Title="AQI 擷取與圖表" Height="720" Width="1200">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top bar -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <Button Content="重新載入" Width="120" Margin="0,0,10,0"
                    Command="{Binding ReloadCommand}"/>
            <TextBlock VerticalAlignment="Center"
                       Text="{Binding IsLoading, StringFormat=載入中：{0}}"/>
        </DockPanel>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="520"/>
            </Grid.ColumnDefinitions>

            <!-- 指標 CheckBox（動態產生） -->
            <GroupBox Header="空氣品質指標" Grid.Column="0" Margin="0,0,10,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Indicators}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Vertical"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox Content="{Binding DisplayName}"
                                          Margin="6"
                                          IsChecked="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </GroupBox>

            <!-- DataGrid 顯示 JSON records -->
            <GroupBox Header="JSON 資料 (records)" Grid.Column="1" Margin="0,0,10,0">
                <DataGrid ItemsSource="{Binding Records}"
                          AutoGenerateColumns="True"
                          IsReadOnly="True"
                          CanUserAddRows="False"
                          EnableRowVirtualization="True"
                          EnableColumnVirtualization="True"/>
            </GroupBox>

            <!-- LiveCharts 圖表 -->
            <GroupBox Header="LiveCharts 圖表" Grid.Column="2">
                <Grid>
                    <lvc:CartesianChart Series="{Binding SeriesCollection}">
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Title="測站" Labels="{Binding Labels}">
                                <lvc:Axis.Separator>
                                    <lvc:Separator Step="1"/>
                                </lvc:Axis.Separator>
                            </lvc:Axis>
                        </lvc:CartesianChart.AxisX>

                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis Title="數值" LabelFormatter="{Binding YFormatter}"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>
                </Grid>
            </GroupBox>
        </Grid>
    </Grid>
</Window>
